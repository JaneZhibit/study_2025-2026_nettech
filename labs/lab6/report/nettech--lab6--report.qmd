---
# Preamble

## Author
author:
  name: Жибицкая Евгения Дмитриевна
  degrees: 
  orcid: 0000-0002-0877-7063
  email: 
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Лабораторная работа №6"
subtitle: "Сетевые технологии"
license: "CC BY"
## Generic options
lang: ru-RU
number-sections: true
toc: true
toc-title: "Содержание"
toc-depth: 2
## Crossref customization
crossref:
  lof-title: "Список иллюстраций"
  lot-title: "Список таблиц"
  lol-title: "Листинги"
## Bibliography
bibliography:
  - bib/cite.bib
csl: _resources/csl/gost-r-7-0-5-2008-numeric.csl
## Formats
format:
### Pdf output format
  pdf:
    toc: true
    number-sections: true
    colorlinks: false
    toc-depth: 2
    lof: true # List of figures
    lot: true # List of tables
#### Document
    documentclass: scrreprt
    papersize: a4
    fontsize: 12pt
    linestretch: 1.5
#### Language
    babel-lang: russian
    babel-otherlangs: english
#### Biblatex
    cite-method: biblatex
    biblio-style: gost-numeric
    biblatexoptions:
      - backend=biber
      - langhook=extras
      - autolang=other*
#### Misc options
    csquotes: true
    indent: true
    header-includes: |
      \usepackage{indentfirst}
      \usepackage{float}
      \floatplacement{figure}{H}
      \usepackage[RM={Scale=0.94},SS={Scale=0.94},SScon={Scale=0.94},TT={Scale=MatchLowercase,FakeStretch=0.9},DefaultFeatures={Ligatures=Common}]{plex-otf}
### Docx output format
  docx:
    toc: true
    number-sections: true
    toc-depth: 2
---

# Цель работы

Изучение принципов распределения и настройки адресного пространства на устройствах сети, приобретение практических навыков по настройке двойного стека адресации IPv4 и IPv6.

# Выполнение лабораторной работы

## Настройка двойного стека адресации IPv4 и IPv6 в локальной сети

### Создание проекта и топологии сети

Запускаем GNS3 VM и GNS3. Создаем новый проект. В рабочем пространстве размещаем и соединяем устройства в соответствии с топологией. Для подсети IPv4 используем маршрутизатор FRR, а для подсети с IPv6 — маршрутизатор VyOS. Запускаем узлы, включаем захват.

![Топология сети в GNS3](image/2.png){#fig-001 width=70%}

### Настройка IPv4-адресации

#### Настройка PC1

Настраиваем IPv4-адресацию для PC1 согласно таблице адресации. Выполняем команды ip 172.16.20.10/25 172.16.20.1 и save для сохранения конфигурации.

![Настройка PC1](image/3.png){#fig-002 width=70%}

#### Настройка PC2

Настраиваем IPv4-адресацию для PC2. Выполняем команды ip 172.16.20.138/25 172.16.20.129 и save для сохранения конфигурации.

![Настройка PC2](image/4.png){#fig-003 width=70%}

#### Настройка сервера

Настраиваем IPv4-адресацию для сервера. Выполняем команды ip 64.100.1.10/24 64.100.1.1 и save для сохранения конфигурации.

![Настройка сервера](image/5.png){#fig-004 width=70%}

#### Проверка конфигурации PC1 и PC2

Просматриваем конфигурацию IPv4 и IPv6 на PC1 и PC2 с помощью команд show ip и show ipv6. Убеждаемся в правильности настроенных параметров.

![Конфигурация PC1 и PC2](image/6.png){#fig-006 width=70%}

#### Настройка маршрутизатора FRR

Настраиваем IPv4-адресацию для интерфейсов маршрутизатора FRR msk-edzhibitskaya-gw-01. Устанавливаем hostname, настраиваем интерфейсы eth0, eth1, eth2 с соответствующими IP-адресами и сохраняем конфигурацию.

![Настройка маршрутизатора FRR](image/7.png){#fig-007 width=70%}

![Настройка маршрутизатора FRR](image/8.png){#fig-008 width=70%}

#### Проверка конфигурации маршрутизатора

Проверяем конфигурацию маршрутизатора с помощью команд show running-config и show interface brief. Убеждаемся в правильности настроек интерфейсов.

![Конфигурация маршрутизатора](image/9.png){#fig-009 width=70%}

![Интерфейсы маршрутизатора](image/10.png){#fig-010 width=70%}

#### Проверка подключения между устройствами IPv4-подсети

Проверяем подключение с помощью команд ping и trace между PC1, PC2 и сервером. Убеждаемся в успешной связи между устройствами IPv4-подсети.


![Проверка ping и trace](image/11.png){#fig-011 width=70%}

### Настройка IPv6-адресации

#### Настройка PC3

Настраиваем IPv6-адресацию для PC3 и PC4. Выполняем команды ip 2001:db8:c0de:12::a/64, 2001:db8:c0de:13::a/64 и save для сохранения конфигурации.

![Настройка PC3 и PC4](image/12.png){#fig-012 width=70%}

#### Настройка IPv6 на сервере

Настраиваем IPv6-адресацию для сервера. Выполняем команды ip 2001:db8:c0de:11::a/64 и save для сохранения конфигурации.

![Настройка IPv6 на сервере](image/13.png){#fig-013 width=70%}

#### Проверка конфигурации PC3 и PC4

Просматриваем конфигурацию IPv4 и IPv6 на PC3 и PC4 с помощью команд show ip и show ipv6. Убеждаемся в правильности настроенных параметров.

![Конфигурация PC3 и PC4](image/14.png){#fig-014 width=70%}


#### Настройка маршрутизатора VyOS

Устанавливаем систему на маршрутизатор VyOS, изменяем имя устройства на msk-edzhibitskaya-gw-02 и назначаем IPv6-адреса интерфейсам согласно таблице адресации.

![Настройка маршрутизатора VyOS](image/15.png){#fig-015 width=70%}

#### Проверка конфигурации VyOS

Просматриваем изменения. Проверяем конфигурацию интерфейсов маршрутизатора VyOS с помощью команды show interfaces. Убеждаемся в правильности настроек IPv6-адресов.

![Конфигурация интерфейсов VyOS](image/17.png){#fig-017 width=70%}

![Конфигурация интерфейсов VyOS](image/18.png){#fig-018 width=70%}

#### Проверка подключения между устройствами IPv6-подсети

Проверяем подключение с помощью команд ping и trace между PC3, PC4 и сервером. Убеждаемся в успешной связи между устройствами IPv6-подсети.

![Проверка с сервером](image/19.png){#fig-019 width=70%}

![Проверка между узлами](image/19_1.jpg){#fig-019 width=70%}


### Проверка изоляции подсетей

Убеждаемся, что устройства из подсети IPv4 не доступны для устройств из подсети IPv6 и наоборот. Проверяем, что только сервер двойного стека может обращаться к устройствам обеих подсетей.

![Проверка изоляции подсетей](image/20.png){#fig-020 width=70%}

![Проверка изоляции подсетей](image/20_1.jpg){#fig-020 width=70%}

### Анализ сетевого трафика

Включаем захват трафика на соединении между сервером двойного стека адресации и ближайшим к нему коммутатором. Анализируем перехваченные пакеты ARP, ICMP, ICMPv6. В перехваченных пакетах наблюдаем процесс разрешения адресов, обмен эхо-запросами и ответами, а также особенности работы протоколов IPv4 и IPv6.

![Wireshark](image/21.png){#fig-021 width=70%}

## 6.3.3. Задание для самостоятельного выполнения
 
Создаем топологию сети 

![Топология для 6.3.3](image/22.png){#fig-022 width=70%}

### Адресное пространство

**Подсеть 1:** 10.10.1.96/27 и 2001:DB8:1:1::/64  
**Подсеть 2:** 10.10.1.16/28 и 2001:DB8:1:4::/64

### ШАГ 1: Расчет характеристик подсетей

**Подсеть 1 (10.10.1.96/27):**
- Адрес сети: 10.10.1.96/27
- Маска: 255.255.255.224
- Broadcast: 10.10.1.127
- Доступные адреса: 10.10.1.97 - 10.10.1.126
- Число узлов: 30
- Шлюз: 10.10.1.97 (первый доступный)

**Подсеть 2 (10.10.1.16/28):**
- Адрес сети: 10.10.1.16/28
- Маска: 255.255.255.240
- Broadcast: 10.10.1.31
- Доступные адреса: 10.10.1.17 - 10.10.1.30
- Число узлов: 14
- Шлюз: 10.10.1.17 (первый доступный)

**IPv6 подсети:**

**Подсеть 1: 2001:DB8:1:1::/64**
- Диапазон: 2001:DB8:1:1::1 - 2001:DB8:1:1:FFFF:FFFF:FFFF:FFFF
- Шлюз: 2001:DB8:1:1::1

**Подсеть 2: 2001:DB8:1:4::/64**
- Диапазон: 2001:DB8:1:4::1 - 2001:DB8:1:4:FFFF:FFFF:FFFF:FFFF
- Шлюз: 2001:DB8:1:4::1

### ШАГ 2: Создание таблицы адресации

**Таблица 6.3.3 - Адресация сети:**

| Устройство | Интерфейс | IPv4-адрес | Маска | Шлюз | IPv6-адрес |
|------------|-----------|-------------|-------|------|-------------|
| msk-user-gw-01 | e0 | 10.10.1.97 | /27 | - | 2001:DB8:1:1::1/64 |
| msk-user-gw-01 | e1 | 10.10.1.17 | /28 | - | 2001:DB8:1:4::1/64 |
| PC1-user | e0 | 10.10.1.98 | /27 | 10.10.1.97 | 2001:DB8:1:1::a/64 |
| PC2-user | e0 | 10.10.1.18 | /28 | 10.10.1.17 | 2001:DB8:1:4::a/64 |

### Настройка IP-адресации

Настраиваем IP-адресацию на маршрутизаторе VyOS и оконечных устройствах согласно разработанной таблице адресации. Для интерфейсов маршрутизатора устанавливаем наименьший адрес в подсети.

![Настройка адресации PC3 ](image/23.png){#fig-022 width=70%}

![Настройка адресации PC4 ](image/25.png){#fig-023 width=70%}

![Настройка имени ](image/26.png){#fig-024 width=70%}

![Настройка маршрутизатора](image/28.png){#fig-025 width=70%}

![Настройка маршрутизатора](image/29.png){#fig-026 width=70%}

### Проверка подключения

Проверяем подключение между устройствами подсети с помощью команд ping и trace. Убеждаемся в успешной связи между устройствами.

![Проверка ping и trace ](image/30.png){#fig-027 width=70%}

![Проверка со второго устройства](image/31.png){#fig-028 width=70%}

# Выводы

В ходе лабораторной работы были изучены принципы распределения и настройки адресного пространства на устройствах сети, приобретены  навыки по настройке двойного стека адресации IPv4 и IPv6 в локальной сети. Успешно настроили IPv4-адресацию на устройствах первой подсети и IPv6-адресацию на устройствах второй подсети. Проверили подключение между устройствами внутри каждой подсети и убедились в их изоляции друг от друга. Проанализировали сетевой трафик и особенности работы протоколов IPv4 и IPv6. Выполнили задание для самостоятельной работы по настройке сети с двумя подсетями и проверке связи между устройствами.

# Список литературы{.unnumbered}


[ТУИС](https://esystem.rudn.ru/pluginfile.php/2858379/mod_resource/content/2/006-lab_ipv4-ipv6-addr-GNS3.pdf)

::: {{refs}}
:::
